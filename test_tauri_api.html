<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tauri API í…ŒìŠ¤íŠ¸ - v21.2</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        .test-btn {
            padding: 12px 24px;
            margin: 5px;
            border: none;
            border-radius: 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
        }
        .test-btn:hover {
            opacity: 0.9;
        }
        .result {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e0e0e0;
        }
        .status {
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
            font-weight: bold;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
        .status.warning {
            background: #fff3cd;
            color: #856404;
        }
        .api-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        .api-item {
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            font-size: 14px;
        }
        .api-available {
            background: #d4edda;
            color: #155724;
        }
        .api-unavailable {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª Tauri API í…ŒìŠ¤íŠ¸ - v21.2</h1>
        
        <!-- í™˜ê²½ í™•ì¸ -->
        <div class="test-section">
            <h2>ğŸ“Š í™˜ê²½ í™•ì¸</h2>
            <button class="test-btn" onclick="checkEnvironment()">í™˜ê²½ ì²´í¬</button>
            <div id="envResult" class="result"></div>
        </div>
        
        <!-- API ìƒíƒœ -->
        <div class="test-section">
            <h2>ğŸ”Œ API ìƒíƒœ</h2>
            <button class="test-btn" onclick="checkAPIStatus()">API ìƒíƒœ í™•ì¸</button>
            <div id="apiGrid" class="api-grid"></div>
            <div id="apiResult" class="result"></div>
        </div>
        
        <!-- Dialog í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <h2>ğŸ“‚ Dialog API í…ŒìŠ¤íŠ¸</h2>
            <button class="test-btn" onclick="testFileDialog()">íŒŒì¼ ì„ íƒ</button>
            <button class="test-btn" onclick="testFolderDialog()">í´ë” ì„ íƒ</button>
            <button class="test-btn" onclick="testSaveDialog()">ì €ì¥ ë‹¤ì´ì–¼ë¡œê·¸</button>
            <div id="dialogResult" class="result"></div>
        </div>
        
        <!-- FS í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <h2>ğŸ“ File System API í…ŒìŠ¤íŠ¸</h2>
            <button class="test-btn" onclick="testReadDir()">ë””ë ‰í† ë¦¬ ì½ê¸°</button>
            <button class="test-btn" onclick="testReadFile()">íŒŒì¼ ì½ê¸°</button>
            <div id="fsResult" class="result"></div>
        </div>
        
        <!-- í†µí•© í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <h2>ğŸš€ í†µí•© í…ŒìŠ¤íŠ¸</h2>
            <button class="test-btn" onclick="runFullTest()">ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            <div id="fullResult" class="result"></div>
        </div>
    </div>

    <script>
        // í™˜ê²½ í™•ì¸
        function checkEnvironment() {
            const result = document.getElementById('envResult');
            let report = '=== í™˜ê²½ ì •ë³´ ===\n\n';
            
            // ë¸Œë¼ìš°ì € ì •ë³´
            report += 'ğŸ“± ë¸Œë¼ìš°ì €:\n';
            report += `User Agent: ${navigator.userAgent}\n`;
            report += `Platform: ${navigator.platform}\n\n`;
            
            // Tauri í™•ì¸
            report += 'ğŸš€ Tauri ìƒíƒœ:\n';
            if (window.__TAURI__) {
                report += 'âœ… window.__TAURI__ ê°ì²´ ì¡´ì¬\n';
                report += `Type: ${typeof window.__TAURI__}\n`;
                report += `Keys: ${Object.keys(window.__TAURI__).join(', ')}\n`;
            } else {
                report += 'âŒ window.__TAURI__ ê°ì²´ ì—†ìŒ\n';
                report += 'ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.\n';
            }
            
            // ì‹œê°„ ì •ë³´
            report += '\nâ° í…ŒìŠ¤íŠ¸ ì‹œê°„:\n';
            report += new Date().toLocaleString();
            
            result.textContent = report;
        }
        
        // API ìƒíƒœ í™•ì¸
        function checkAPIStatus() {
            const grid = document.getElementById('apiGrid');
            const result = document.getElementById('apiResult');
            
            if (!window.__TAURI__) {
                grid.innerHTML = '<div class="status error">âŒ Tauri APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>';
                result.textContent = 'ì›¹ ë¸Œë¼ìš°ì €ì—ì„œëŠ” Tauri APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\nTauri ì•±ì—ì„œ ì‹¤í–‰í•´ì£¼ì„¸ìš”.';
                return;
            }
            
            const apis = [
                { name: 'dialog', obj: window.__TAURI__.dialog },
                { name: 'fs', obj: window.__TAURI__.fs },
                { name: 'path', obj: window.__TAURI__.path },
                { name: 'shell', obj: window.__TAURI__.shell },
                { name: 'invoke', obj: window.__TAURI__.invoke },
                { name: 'event', obj: window.__TAURI__.event },
                { name: 'window', obj: window.__TAURI__.window },
                { name: 'os', obj: window.__TAURI__.os }
            ];
            
            let gridHTML = '';
            let report = '=== API ìƒì„¸ ì •ë³´ ===\n\n';
            
            apis.forEach(api => {
                const available = api.obj !== undefined;
                gridHTML += `<div class="api-item ${available ? 'api-available' : 'api-unavailable'}">
                    ${available ? 'âœ…' : 'âŒ'} ${api.name}
                </div>`;
                
                if (available) {
                    report += `âœ… ${api.name} API\n`;
                    if (typeof api.obj === 'object' && api.obj !== null) {
                        const methods = Object.keys(api.obj).filter(key => typeof api.obj[key] === 'function');
                        if (methods.length > 0) {
                            report += `   ë©”ì†Œë“œ: ${methods.slice(0, 5).join(', ')}${methods.length > 5 ? '...' : ''}\n`;
                        }
                    }
                } else {
                    report += `âŒ ${api.name} API - ì‚¬ìš© ë¶ˆê°€\n`;
                }
            });
            
            grid.innerHTML = gridHTML;
            result.textContent = report;
        }
        
        // Dialog í…ŒìŠ¤íŠ¸
        async function testFileDialog() {
            const result = document.getElementById('dialogResult');
            
            if (!window.__TAURI__) {
                result.textContent = 'âŒ Tauri í™˜ê²½ì´ ì•„ë‹™ë‹ˆë‹¤.';
                return;
            }
            
            try {
                result.textContent = 'íŒŒì¼ ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸ ì—´ê¸°...';
                
                let selected = null;
                if (window.__TAURI__.dialog && window.__TAURI__.dialog.open) {
                    selected = await window.__TAURI__.dialog.open({
                        multiple: false,
                        filters: [{
                            name: 'Images',
                            extensions: ['png', 'jpg', 'jpeg', 'webp']
                        }]
                    });
                } else {
                    throw new Error('Dialog APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
                if (selected) {
                    result.textContent = `âœ… ì„ íƒëœ íŒŒì¼:\n${selected}`;
                } else {
                    result.textContent = 'âŒ íŒŒì¼ ì„ íƒ ì·¨ì†Œë¨';
                }
            } catch (error) {
                result.textContent = `âŒ ì˜¤ë¥˜: ${error.message}`;
            }
        }
        
        async function testFolderDialog() {
            const result = document.getElementById('dialogResult');
            
            if (!window.__TAURI__) {
                result.textContent = 'âŒ Tauri í™˜ê²½ì´ ì•„ë‹™ë‹ˆë‹¤.';
                return;
            }
            
            try {
                result.textContent = 'í´ë” ì„ íƒ ë‹¤ì´ì–¼ë¡œê·¸ ì—´ê¸°...';
                
                let selected = null;
                if (window.__TAURI__.dialog && window.__TAURI__.dialog.open) {
                    selected = await window.__TAURI__.dialog.open({
                        directory: true,
                        multiple: false,
                        title: 'í´ë” ì„ íƒ í…ŒìŠ¤íŠ¸'
                    });
                } else {
                    throw new Error('Dialog APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
                if (selected) {
                    result.textContent = `âœ… ì„ íƒëœ í´ë”:\n${selected}`;
                } else {
                    result.textContent = 'âŒ í´ë” ì„ íƒ ì·¨ì†Œë¨';
                }
            } catch (error) {
                result.textContent = `âŒ ì˜¤ë¥˜: ${error.message}`;
            }
        }
        
        async function testSaveDialog() {
            const result = document.getElementById('dialogResult');
            
            if (!window.__TAURI__) {
                result.textContent = 'âŒ Tauri í™˜ê²½ì´ ì•„ë‹™ë‹ˆë‹¤.';
                return;
            }
            
            try {
                result.textContent = 'ì €ì¥ ë‹¤ì´ì–¼ë¡œê·¸ ì—´ê¸°...';
                
                let selected = null;
                if (window.__TAURI__.dialog && window.__TAURI__.dialog.save) {
                    selected = await window.__TAURI__.dialog.save({
                        filters: [{
                            name: 'JSON',
                            extensions: ['json']
                        }]
                    });
                } else {
                    throw new Error('Save Dialog APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
                if (selected) {
                    result.textContent = `âœ… ì €ì¥ ê²½ë¡œ:\n${selected}`;
                } else {
                    result.textContent = 'âŒ ì €ì¥ ì·¨ì†Œë¨';
                }
            } catch (error) {
                result.textContent = `âŒ ì˜¤ë¥˜: ${error.message}`;
            }
        }
        
        // FS í…ŒìŠ¤íŠ¸
        async function testReadDir() {
            const result = document.getElementById('fsResult');
            
            if (!window.__TAURI__) {
                result.textContent = 'âŒ Tauri í™˜ê²½ì´ ì•„ë‹™ë‹ˆë‹¤.';
                return;
            }
            
            try {
                // ë¨¼ì € í´ë” ì„ íƒ
                let folderPath = null;
                if (window.__TAURI__.dialog && window.__TAURI__.dialog.open) {
                    folderPath = await window.__TAURI__.dialog.open({
                        directory: true,
                        title: 'ì½ì„ í´ë” ì„ íƒ'
                    });
                }
                
                if (!folderPath) {
                    result.textContent = 'âŒ í´ë”ê°€ ì„ íƒë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
                    return;
                }
                
                // ë””ë ‰í† ë¦¬ ì½ê¸°
                if (window.__TAURI__.fs && window.__TAURI__.fs.readDir) {
                    const entries = await window.__TAURI__.fs.readDir(folderPath);
                    
                    let report = `âœ… í´ë” ë‚´ìš© (${entries.length}ê°œ í•­ëª©):\n\n`;
                    entries.slice(0, 10).forEach(entry => {
                        const type = entry.children ? 'ğŸ“' : 'ğŸ“„';
                        report += `${type} ${entry.name || entry.path}\n`;
                    });
                    
                    if (entries.length > 10) {
                        report += `... ì™¸ ${entries.length - 10}ê°œ í•­ëª©`;
                    }
                    
                    result.textContent = report;
                } else {
                    throw new Error('FS APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                result.textContent = `âŒ ì˜¤ë¥˜: ${error.message}`;
            }
        }
        
        async function testReadFile() {
            const result = document.getElementById('fsResult');
            
            if (!window.__TAURI__) {
                result.textContent = 'âŒ Tauri í™˜ê²½ì´ ì•„ë‹™ë‹ˆë‹¤.';
                return;
            }
            
            try {
                // íŒŒì¼ ì„ íƒ
                let filePath = null;
                if (window.__TAURI__.dialog && window.__TAURI__.dialog.open) {
                    filePath = await window.__TAURI__.dialog.open({
                        multiple: false,
                        filters: [{
                            name: 'Text Files',
                            extensions: ['txt', 'md', 'json']
                        }]
                    });
                }
                
                if (!filePath) {
                    result.textContent = 'âŒ íŒŒì¼ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
                    return;
                }
                
                // íŒŒì¼ ì½ê¸°
                if (window.__TAURI__.fs && window.__TAURI__.fs.readTextFile) {
                    const content = await window.__TAURI__.fs.readTextFile(filePath);
                    
                    result.textContent = `âœ… íŒŒì¼ ë‚´ìš©:\n\n${content.slice(0, 500)}${content.length > 500 ? '...' : ''}`;
                } else {
                    throw new Error('readTextFile APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                result.textContent = `âŒ ì˜¤ë¥˜: ${error.message}`;
            }
        }
        
        // ì „ì²´ í…ŒìŠ¤íŠ¸
        async function runFullTest() {
            const result = document.getElementById('fullResult');
            let report = '=== ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹œì‘ ===\n\n';
            
            // 1. í™˜ê²½ ì²´í¬
            report += '1ï¸âƒ£ í™˜ê²½ ì²´í¬\n';
            if (window.__TAURI__) {
                report += 'âœ… Tauri í™˜ê²½ í™•ì¸\n\n';
            } else {
                report += 'âŒ Tauri í™˜ê²½ì´ ì•„ë‹˜\n';
                report += 'í…ŒìŠ¤íŠ¸ë¥¼ ì¤‘ë‹¨í•©ë‹ˆë‹¤.\n';
                result.textContent = report;
                return;
            }
            
            // 2. API ì²´í¬
            report += '2ï¸âƒ£ API ì²´í¬\n';
            const apis = ['dialog', 'fs', 'path', 'invoke'];
            let allApisAvailable = true;
            
            apis.forEach(api => {
                if (window.__TAURI__[api]) {
                    report += `âœ… ${api} API ì‚¬ìš© ê°€ëŠ¥\n`;
                } else {
                    report += `âŒ ${api} API ì—†ìŒ\n`;
                    allApisAvailable = false;
                }
            });
            
            report += '\n';
            
            // 3. Dialog í…ŒìŠ¤íŠ¸
            if (window.__TAURI__.dialog) {
                report += '3ï¸âƒ£ Dialog í…ŒìŠ¤íŠ¸\n';
                
                try {
                    // ë©”ì†Œë“œ í™•ì¸
                    if (window.__TAURI__.dialog.open) {
                        report += 'âœ… open() ë©”ì†Œë“œ ì¡´ì¬\n';
                    }
                    if (window.__TAURI__.dialog.save) {
                        report += 'âœ… save() ë©”ì†Œë“œ ì¡´ì¬\n';
                    }
                    if (window.__TAURI__.dialog.message) {
                        report += 'âœ… message() ë©”ì†Œë“œ ì¡´ì¬\n';
                    }
                } catch (e) {
                    report += `âŒ Dialog í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${e.message}\n`;
                }
                
                report += '\n';
            }
            
            // 4. FS í…ŒìŠ¤íŠ¸
            if (window.__TAURI__.fs) {
                report += '4ï¸âƒ£ FS í…ŒìŠ¤íŠ¸\n';
                
                try {
                    // ë©”ì†Œë“œ í™•ì¸
                    if (window.__TAURI__.fs.readDir) {
                        report += 'âœ… readDir() ë©”ì†Œë“œ ì¡´ì¬\n';
                    }
                    if (window.__TAURI__.fs.readBinaryFile) {
                        report += 'âœ… readBinaryFile() ë©”ì†Œë“œ ì¡´ì¬\n';
                    }
                    if (window.__TAURI__.fs.readTextFile) {
                        report += 'âœ… readTextFile() ë©”ì†Œë“œ ì¡´ì¬\n';
                    }
                } catch (e) {
                    report += `âŒ FS í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${e.message}\n`;
                }
                
                report += '\n';
            }
            
            // 5. ê²°ê³¼ ìš”ì•½
            report += '5ï¸âƒ£ í…ŒìŠ¤íŠ¸ ê²°ê³¼\n';
            if (allApisAvailable) {
                report += 'âœ… ëª¨ë“  í•„ìˆ˜ API ì‚¬ìš© ê°€ëŠ¥\n';
                report += 'âœ… í´ë” ì„ íƒ ê¸°ëŠ¥ ì‚¬ìš© ê°€ëŠ¥\n';
                report += 'âœ… íŒŒì¼ ì¸ë±ì‹± ì¤€ë¹„ ì™„ë£Œ\n';
            } else {
                report += 'âš ï¸ ì¼ë¶€ APIê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤.\n';
                report += 'ì œí•œëœ ê¸°ëŠ¥ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.\n';
            }
            
            report += '\n=== í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===';
            result.textContent = report;
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì²´í¬
        window.addEventListener('DOMContentLoaded', () => {
            checkEnvironment();
        });
    </script>
</body>
</html>
